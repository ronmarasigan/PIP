<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    
    <title>PIP - A tiny PHP application framework</title>
    <meta name="description" content="PIP is a tiny PHP application framework built for people who use a LAMP stack.">
    <meta name="author" content="Gilbert Pellegrom">
    
    <link rel="stylesheet" href="style.css" type="text/css" media="screen" />
    
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3892196-27']);
    _gaq.push(['_trackPageview']);
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</head>
<body>

    <div id="container">

        <h1 id="title"><a href="http://github.com/gilbitron/PIP">PIP</a></h1>

        <div class="intro">
            <p>PIP is a tiny PHP application framework built for people who use a LAMP stack. PIP aims to be as 
            simple as possible to set up and use.</p>
        </div>

        <h2 id="requirements">Requirements</h2>
        <ul>
            <li>PHP 5.1 or greater</li>
            <li>MySQL 4.1.2 or greater</li>
            <li>The mod_rewrite Apache module</li>
        </ul>
        
        <h2 id="download">Download</h2>
        <p>You can download the latest version of PIP in either <a href="http://github.com/gilbitron/PIP/zipball/master">zip</a> or
        <a href="http://github.com/gilbitron/PIP/tarball/master">tar</a> formats.</p>
        <p>You can also clone the project with <a href="http://git-scm.com">Git</a> by running:</p>
        <pre><code>$ git clone git://github.com/gilbitron/PIP</code></pre>
        
        <h2 id="installation">Installation</h2>
        <ul>
            <li>Download PIP and extract</li>
            <li>Navigate to <code>application/config/config.php</code> and fill in your <code>base_url</code></li>
            <li>You are ready to rock! Point your browser to your <code>base_url</code> and hopefully see a welcome message.</li>
        </ul>

        <h2 id="documentation">Documentation</h2>
        <p>PIP is very similar in it's architecture to <a href="http://codeigniter.com/">CodeIgniter</a> and will likely look
        very familiar to you if you already have experince with CodeIgniter. However remember that PIP is a tiny framework
        and does not include a lot of the functionality that comes with CodeIgniter.</p>
        
        <h3 id="mvc">Model-View-Controller</h3>
        <p>PIP is based on the Model-View-Controller development pattern. MVC is a software approach that separates 
        application logic from presentation. In practice, it permits your web pages to contain minimal scripting since 
        the presentation is separate from the PHP scripting.</p>
        <ul>
            <li><strong>The Model</strong> represents your data structures. Typically your model classes will contain functions that help 
            you retrieve, insert, and update information in your database.</li>
            <li><strong>The View</strong> is the information that is being presented to a user. A View will normally be a web page, but can be
            any type of "page".</li>
            <li><strong>The Controller</strong> serves as an intermediary between the Model, the View, and any other resources needed to process 
            the HTTP request and generate a web page.</li>
        </ul>
        
        <h3 id="folder">Folder Structure</h3>
        <p>With MVC in mind the physical layout of PIP is fairly simple. Your application specific files go in the "application"
        folder (you don't need to touch the system folder). Inside the application folder there are folders for all of the specific
        application entities:</p>
        <ul>
            <li>config</li>
            <li>controllers</li>
            <li>helpers</li>
            <li>models</li>
            <li>plugins</li>
            <li>views</li>
        </ul>
        <p>When PIP loads files it assumes they are in the corresponding folders. So make sure you place your files in the correct folders.</p>
        
        <p>We encourage you to use the "static" folder in the root to store you static resource files (CSS, JS etc) however you can put them 
        anywhere. You can also use the <code>BASE_URL</code> variable to help include files in your HTML. For example:</p>
        <pre><code>&lt;link rel="stylesheet" href="&lt;?php echo BASE_URL; ?&gt;static/css/style.css" type="text/css" media="screen" /&gt;</code></pre>
        
        <h3 id="naming">Naming Conventions</h3>
        <p>All classes in PIP use <a href="http://c2.com/cgi/wiki?PascalCase">PascalCase</a> naming. The associated file names must be
        the same except all lower case. So for example the class <code>ThisIsAClass</code> would have the filename <code>thisisaclass.php</code>.
        Underscores in classes must be included in file names as well.</p>
        
        <h3 id="urls">URL Structure</h3>
        <p>By default, URLs in PIP are designed to be search-engine and human friendly. Rather than using the standard 
        "query string" approach to URLs that is synonymous with dynamic systems, PIP uses a segment-based approach:</p>
        
        <pre><code>example.com/class/function/param</code></pre>
        
        <p>By default <code>index.php</code> is hidden in the URL. This is done using the <code>.htaccess</code> file
        in the root directory.</p>
        
        <h3 id="controllers">Controllers</h3>
        <p>Controllers are the driving force of a PIP application. As you can see from the <a href="#urls">URL structure</a>, segments of
        the URL are mapped to a class and function. These classes are controllers stored in the "application/controller" directory. So
        for example the URL...</p>
        
        <pre><code>example.com/auth/login</code></pre>
        
        <p>...would map to the following Controller with the filename <code>auth.php</code>:</p>
        
        <pre><code>&lt;?php

class Auth extends Controller {

    function index()
    {
        // This is the default function (i.e. no function is set in the URL)
    }
    
    function login()
    {
        echo 'Hello World!';
    }

}

?&gt;</code></pre>

        <p>...and the output would be "Hello World!".</p>
        
        <p>The default controller and error controller can be set in <code>application/config/config.php</code></p>
        
        <p>Note that if you need to declare a contructor you must also call the parent constructor like:</p>
        
        <pre><code>&lt;?php

class Example extends Controller {

    public function __construct()
    {
        parent::__construct();
        // Your own constructor code
    }

}

?&gt;</code></pre>

        <p>There are several helper functions that can also be used in controllers. Most of these functions take the parameter <code>$name</code>
        of the corresponding class:</p>
        <ul>
            <li><code>loadModel($name)</code> - Load a model</li>
            <li><code>loadView($name)</code> - Load a view</li>
            <li><code>loadPlugin($name)</code> - Load a plugin</li>
            <li><code>loadHelper($name)</code> - Load a helper</li>
            <li><code>redirect($location)</code> - Redirect to a page without having to include the base URL. E.g:
            <pre><code>$this->redirect('some_class/some_function');</code></pre>
            </li>
        </ul>
        
        <h3 id="views">Views</h3>
        <p>In PIP a view is simply a web page. They can contain everything a normal web page would include. Views are almost
        always loaded by <a href="#controllers">Controllers</a>. So for example if you had a view called <code>main_view.php</code> that
        contained the following HTML:</p>
        
        <pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;My Site&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Welcome to my Site!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

        <p>... you would load it in a controller by doing the following:</p>
        
        <pre><code>&lt;?php

class Main extends Controller {
	
    function index()
    {
        $template = $this->loadView('main_view');
        $template->render();
    }
    
}

?&gt;</code></pre>

        <p>The View class has a helper function called <code>set($key, $val)</code> that allows you to pass variables from the Controller to the View.</p>
        
        <pre><code>$template = $this->loadView('main_view');
$template->set('someval', 200);
$template->render();</code></pre>

        <p>...then in the view you could do:</p>
        
        <pre><code>&lt;?php echo $someval; ?&gt;</code></pre>
        
        <p>...and the output would be <code>200</code>. Any kind of PHP variable can be passed to a view in this way.</p>
        
        <h3 id="models">Models</h3>
        <p>In PIP models are classes whose sole responsiblity it is to deal with data (usually from a database). For example:</p>
        
        <pre><code>&lt;?php

class Example_model extends Model {
	
    public function getSomething($id)
    {
        $id = $this->escapeString($id);
        $result = $this->query('SELECT * FROM something WHERE id="'. $id .'"');
        return $result;
    }

}

?&gt;</code></pre>
        
        ...then in a controller you would do:
        
        <pre><code>function index()
{
    $example = $this->loadModel('Example_model');
    $something = $example->getSomething($id);
    
    $template = $this->loadView('main_view');
    $template->set('someval', $something);
    $template->render();
}</code></pre>

        <p>Now the results of your database query would be available in your view in <code>$someval</code>.
        Note that in the above code there are no steps to connect to the database. That is because this is done automatically. For this
        to work you must provide your database details in <code>config.php</code>:</p>
        
        <pre><code>$config['db_host'] = ''; // Database host (e.g. localhost)
$config['db_name'] = ''; // Database name
$config['db_username'] = ''; // Database username
$config['db_password'] = ''; // Database password</code></pre>

        <p>There are several helper functions that can also be used in models:</p>
        <ul>
            <li><code>query($query)</code> - Returns an array of results from a query</li>
            <li><code>execute($query)</code> - Returns the direct result from a query</li>
            <li><code>escapeString($string)</code> - Escape strings before using them in queries</li>
        </ul>

        <h3 id="helpersplugins">Helpers &amp; Plugins</h3>
        <p>There are two types of additional resources you can use in PIP.</p>
        <ul>
            <li><strong>Helpers</strong> are classes which you can use that don't fall under the category of "controllers". These
            will usually be classes that provide extra functionality that you can use in your controllers. PIP ships with two
            helper classes (<code>Session_helper</code> and <code>Url_helper</code>) which are examples of how to use helpers.</li>
            <li><strong>Plugins</strong> are literally any PHP files and can provide any functionality you want. By loading a plugin
            you are simply including the PHP file from the "plugins" folder. This can be useful if you want to use third party 
            libraries in your PIP application.</li>
        </ul>
        
        <h2 id="contributors">Contributors</h2>
        <p>Thanks to the following people for contributing to PIP:</p>
        <ul>
            <li><a href="http://www.craig-russell.co.uk">Craig Russell</a></li>
        </ul>
        
        <h2 id="changelog">Changelog</h2>
        <p><strong>v0.5.3</strong> - Several changes:</p>
        <ul>
            <li>Added some checking to the <code>Url_helper</code> <code>segment</code> function.</li>
            <li>Fixed bug where <code>query</code> would add an empty element to the end of the result array.</li>
            <li>Added some helper functions to <code>model.php</code>.</li>
        </ul>
        <p><strong>v0.5.2</strong> - Several changes:</p>
        <ul>
            <li>Removed the need to define <code>RewriteBase</code> in <code>.htaccess</code>.</li>
            <li>Neater URL rewriting in <code>pip.php</code>.</li>
            <li>New folders within the "static" folders for CSS, JS and images.</li>
            <li>Moved <code>style.css</code> from Views folder to static folder and updated <code>header.php</code>.</li>
        </ul>
        <p><strong>v0.5.1</strong> - Several changes:</p>
        <ul>
            <li>Added <code>BASE_URL</code> define.</li>
            <li>Added "static" folder for static resource files.</li>
            <li>Blocked index browsing using .htaccess and removed blank index.html files.</li>
        </ul>
        <p><strong>v0.5</strong> - Initial version.</p>

        <footer>
            <p>Released under the MIT license by <a href="http://gilbert.pellegrom.me/">Gilbert Pellegrom</a> from <a href="http://dev7studios.com/">Dev7studios</a></p>
        </footer>

    </div>
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script>
    $(document).ready(function() {        
        $('#container h2,#container h3').each(function(index) {
            var title = $(this);
            var thisId = this.id;
            var text = title.text();
            if(title.is('h3')) text = '- ' + text;
            
            $('<a></a>').attr({
                'title': 'jump to ' + title.text(),
                'href': '#' + thisId
            }).text(text).appendTo('#page-contents div.links');
        });
    });
    </script>
    
    <div id="page-contents">
        <h3>PIP Contents</h3>
        <div class="links"></div>
        <div class="share-this">
            <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="gilbitron">Tweet</a>
            <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
            <div class="facebook-share-button">
                <iframe src="http://www.facebook.com/plugins/like.php?href=http%3a%2f%2fgilbitron.github.com%2fPIP%2f&amp;layout=button_count&amp;show_faces=false&amp;width=160&amp;action=like&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:160px; height:21px;" allowTransparency="true"></iframe>
            </div>
        </div>
    </div>
    
    <a href="https://github.com/gilbitron/PIP"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png" alt="Fork me on GitHub"></a>

</body>
</html>
